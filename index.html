<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Beach Bucket Game</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      font-family: Comic Sans MS;
      background: #87CEEB;
    }
    canvas {
      display: block;
      margin: 0 auto;
      background: #fff;
    }
    #inventoryButton {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 16px;
      padding: 8px 12px;
    }
    #inventoryPopup {
      position: absolute;
      top: 60px;
      right: 10px;
      background: white;
      border: 2px solid black;
      padding: 10px;
      display: none;
    }
    #bucketDisplay {
      position: absolute;
      bottom: 10px;
      left: 10px;
      background: rgba(255, 255, 255, 0.8);
      border: 2px solid black;
      padding: 10px;
      font-size: 18px;
    }
    #dumpButton, #upgradeButton {
      position: absolute;
      bottom: 10px;
      right: 10px;
      font-size: 16px;
      padding: 8px 12px;
      margin-left: 10px;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas" width="800" height="600"></canvas>
  <div id="bucketDisplay">ğŸª£ 0 / 5</div>
  <button id="inventoryButton">ğŸ“¦ Inventory</button>
  <button id="dumpButton">ğŸ“¥ Dump to Inventory</button>
  <button id="upgradeButton">â¬†ï¸ Upgrade</button>
  <div id="inventoryPopup"></div>
  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    let bucket = {
      current: 0,
      max: 5,
      contents: [],
    };

    let inventory = {
      sand: 0,
      seashells: 0,
      diamond: 0,
      medal: 0,
      pizza: 0,
    };

    let upgrades = {
      treasureUnlocked: false,
    };

    let items = [];
    const itemTypes = ['sand', 'seashell'];

    function spawnItem() {
      const type = itemTypes[Math.floor(Math.random() * itemTypes.length)];
      items.push({
        x: Math.random() * 760 + 20,
        y: Math.random() * 560 + 20,
        type,
        collected: false
      });
    }

    function drawBackground() {
      ctx.fillStyle = '#87CEEB';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = '#F4E99D';
      ctx.fillRect(0, 500, canvas.width, 100);
    }

    function drawItems() {
      items.forEach(item => {
        if (!item.collected) {
          ctx.font = '30px Comic Sans MS';
          ctx.fillText(item.type === 'sand' ? 'ğŸŸ¡' : 'ğŸš', item.x, item.y);
        }
      });
    }

    function draw() {
      drawBackground();
      drawItems();
    }

    function updateBucketDisplay() {
      document.getElementById('bucketDisplay').textContent = `ğŸª£ ${bucket.current} / ${bucket.max}`;
    }

    canvas.addEventListener('click', e => {
      const rect = canvas.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;

      items.forEach(item => {
        if (!item.collected && Math.abs(item.x - x) < 30 && Math.abs(item.y - y) < 30) {
          if (bucket.current < bucket.max) {
            bucket.current++;
            bucket.contents.push(item.type);
            item.collected = true;

            if (upgrades.treasureUnlocked && Math.random() < 0.2) {
              const treasure = ['diamond', 'medal', 'pizza'][Math.floor(Math.random() * 3)];
              bucket.contents.push(treasure);
              bucket.current++;
            }

            updateBucketDisplay();
          }
        }
      });
    });

    document.getElementById('inventoryButton').addEventListener('click', () => {
      const popup = document.getElementById('inventoryPopup');
      popup.style.display = popup.style.display === 'block' ? 'none' : 'block';
      popup.innerHTML = `
        <h3>ğŸ“¦ Inventory</h3>
        <p>ğŸŸ¡ Sand: ${inventory.sand}</p>
        <p>ğŸš Seashells: ${inventory.seashells}</p>
        <p>ğŸ’ Diamonds: ${inventory.diamond}</p>
        <p>ğŸ… Medals: ${inventory.medal}</p>
        <p>ğŸ• Pizzas: ${inventory.pizza}</p>
      `;
    });

    document.getElementById('dumpButton').addEventListener('click', () => {
      bucket.contents.forEach(item => {
        if (inventory.hasOwnProperty(item)) {
          inventory[item]++;
        }
      });
      bucket.current = 0;
      bucket.contents = [];
      updateBucketDisplay();
    });

    document.getElementById('upgradeButton').addEventListener('click', () => {
      if (!upgrades.treasureUnlocked && inventory.seashells >= 5) {
        inventory.seashells -= 5;
        upgrades.treasureUnlocked = true;
        alert('ğŸ‰ You unlocked treasure finding!');
      } else if (!upgrades.treasureUnlocked) {
        alert('You need 5 ğŸš to unlock treasure.');
      } else {
        alert('Treasure finding already unlocked!');
      }
    });

    setInterval(() => {
      if (items.length < 15) spawnItem();
    }, 1000);

    function gameLoop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      draw();
      requestAnimationFrame(gameLoop);
    }

    updateBucketDisplay();
    gameLoop();
  </script>
</body>
</html>
