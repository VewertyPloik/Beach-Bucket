<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Beach Bucket Game</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      font-family: Arial, sans-serif;
      background: #F4E99D; /* full screen sand */
    }
    canvas {
      display: block;
      margin: 0 auto;
      background: #F4E99D;
    }
    #bucketDisplay {
      position: absolute;
      bottom: 20px;
      left: 20px;
      background: rgba(255, 255, 255, 0.85);
      border: 2px solid #555;
      padding: 10px;
      font-size: 20px;
    }
    #inventoryButton {
      position: absolute;
      top: 20px;
      left: 20px;
      font-size: 18px;
      padding: 10px 16px;
    }
    #dumpButton {
      position: absolute;
      top: 20px;
      right: 140px;
      font-size: 18px;
      padding: 10px 16px;
    }
    #upgradeButton {
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 18px;
      padding: 10px 16px;
    }
    #inventoryPopup {
      position: absolute;
      top: 70px;
      left: 20px;
      background: white;
      border: 2px solid black;
      padding: 12px;
      font-size: 18px;
      display: none;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas" width="800" height="600"></canvas>
  <div id="bucketDisplay">ğŸª£ 0 / 5</div>
  <button id="inventoryButton">ğŸ“¦ Inventory</button>
  <button id="dumpButton">ğŸ“¥ Dump</button>
  <button id="upgradeButton">â¬†ï¸ Upgrade</button>
  <div id="inventoryPopup"></div>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    let bucket = {
      current: 0,
      max: 5,
      contents: [],
    };

    let inventory = {
      sand: 0,
      seashells: 0,
      diamond: 0,
      medal: 0,
      pizza: 0,
    };

    let upgrades = {
      treasureUnlocked: false,
    };

    let items = [];
    const itemTypes = ['sand', 'seashell'];
    const treasureTypes = ['diamond', 'medal', 'pizza'];

    // Spawn initial 10 items
    for (let i = 0; i < 10; i++) spawnItem();

    function spawnItem() {
      let allTypes = [...itemTypes];
      if (upgrades.treasureUnlocked) allTypes.push(...treasureTypes);
      const type = allTypes[Math.floor(Math.random() * allTypes.length)];
      items.push({
        x: Math.random() * (canvas.width - 40) + 20,
        y: Math.random() * (canvas.height - 40) + 20,
        type,
        collected: false
      });
    }

    function drawItems() {
      items.forEach(item => {
        if (!item.collected) {
          ctx.font = '30px Arial';
          const emoji = {
            sand: 'ğŸŸ¡',
            seashell: 'ğŸš',
            diamond: 'ğŸ’',
            medal: 'ğŸ…',
            pizza: 'ğŸ•'
          }[item.type];
          ctx.fillText(emoji, item.x, item.y);
        }
      });
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = '#F4E99D';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      drawItems();
    }

    function updateBucketDisplay() {
      document.getElementById('bucketDisplay').textContent = `ğŸª£ ${bucket.current} / ${bucket.max}`;
    }

    canvas.addEventListener('click', e => {
      const rect = canvas.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;

      items.forEach(item => {
        if (!item.collected && Math.abs(item.x - x) < 30 && Math.abs(item.y - y) < 30) {
          if (bucket.current < bucket.max) {
            bucket.current++;
            bucket.contents.push(item.type);
            item.collected = true;
            updateBucketDisplay();
          }
        }
      });
    });

    document.getElementById('inventoryButton').addEventListener('click', () => {
      const popup = document.getElementById('inventoryPopup');
      popup.style.display = popup.style.display === 'block' ? 'none' : 'block';
      popup.innerHTML = `
        <h3>ğŸ“¦ Inventory</h3>
        <p>ğŸŸ¡ Sand: ${inventory.sand}</p>
        <p>ğŸš Seashells: ${inventory.seashells}</p>
        <p>ğŸ’ Diamonds: ${inventory.diamond}</p>
        <p>ğŸ… Medals: ${inventory.medal}</p>
        <p>ğŸ• Pizzas: ${inventory.pizza}</p>
      `;
    });

    document.getElementById('dumpButton').addEventListener('click', () => {
      bucket.contents.forEach(item => {
        if (inventory.hasOwnProperty(item)) {
          inventory[item]++;
        }
      });
      bucket.current = 0;
      bucket.contents = [];
      updateBucketDisplay();
    });

    document.getElementById('upgradeButton').addEventListener('click', () => {
      if (!upgrades.treasureUnlocked && inventory.seashells >= 5) {
        inventory.seashells -= 5;
        upgrades.treasureUnlocked = true;
        alert('ğŸ‰ You unlocked treasure finding!');
      } else if (!upgrades.treasureUnlocked) {
        alert('You need 5 ğŸš to unlock treasure.');
      } else {
        alert('Treasure finding already unlocked!');
      }
    });

    setInterval(() => {
      spawnItem();
    }, 2000);

    function gameLoop() {
      draw();
      requestAnimationFrame(gameLoop);
    }

    updateBucketDisplay();
    gameLoop();
  </script>
</body>
</html>
